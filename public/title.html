<!DOCTYPE html>
<html>
  <head>
    <link rel="stylesheet" href="https://bootswatch.com/4/lux/bootstrap.min.css">
    <title>Movie/TV Project</title>
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.6.9/angular.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
  </head>
  <body ng-app="app" ng-controller="ctrl">
    <h1 style="text-align:center; padding-top: .5em; padding-bottom:.25em;">Movie/TV Database</h1>

<nav class="navbar navbar-expand-lg navbar-dark bg-primary">
<button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarColor01" aria-controls="navbarColor01" aria-expanded="false" aria-label="Toggle navigation" style="">
 <span class="navbar-toggler-icon"></span>
</button>

<div class="collapse navbar-collapse" id="navbarColor01">
 <ul class="navbar-nav mr-auto">
   <li class="nav-item active">
     <a class="nav-link" href="http://cisc-dean.stthomas.edu:8002/">Home <span class="sr-only">(current)</span></a>
   </li>
   <li class="nav-item">
     <a class="nav-link" href="http://cisc-dean.stthomas.edu:8002/about">About</a>
   </li>
 </ul>
 <button type="button" class="btn btn-outline-info" id="edit_btn">Edit</button>
  </div>
</nav>
  <div id="movie-info" style="display:inline; position:relative; display:flex; flex-direction:row; flex-wrap:wrap; justify-content:space-around; align-items:center; width=100%;">
  <div>
    <h1 style="margin:0 0 20px 0;">***MOVIE TITLE***</h1>
    <div class="form-group">
    <h4 id="type">Type: ***TITLE TYPE***</h4>
    <h4 id="start">Start Year: ***START*** </h4>
    <h4 id="end">End Year: ***END***</h4>
    <h4 id="run_time">Run Time: ***RUN TIME*** minutes</h4>
    <h4 id="genre">Genre: ***GENRE***<h4>
    <h4 id="avg_rating">Rating: ***AVERAGE RATE***</h4><h4>Votes: ***NUM VOTES***</h4>
    </div>
  </div>
    <div id="poster"><img src="***POSTER***" border="6" style="width:25em; height:auto; padding-top: 1em;padding-left: 1em;"></div>
  </div>
<br><br><br><br><br><br><br><br><br>
  <div id="top-billed" style="display:block; float:bottom; position:relative;">
    <h4>Top Billed Cast</h4>
    <table class="table table-hover" style="color:#1a1a1a">
  <thead>
    <tr>
      <th scope="col">Type</th>
      <th scope="col">Name</th>
      <th scope="col">Position</th>
    </tr>
  </thead>
  <tbody>
    <tr class="table-active" ng-repeat="row in rows">
        <th>{{ $index+1 }}</th>
        <td><a ng-href="{{ row.url }}">{{ row.primary_name }}</a></td>
        <td>{{ row.birth_year }}</td>
        <td>{{ row.death_year }}</td>
        <td>{{ row.end_year }}</td>
    </tr>
  </tbody>
</table>
<br><br>
  </div>
    <script>
        var app = angular.module('app', []);
        app.controller('ctrl', function($scope){
            var orig_rows = {rows:***ROWS***};
            var rows = [];

            for(var i=0; i< orig_rows.rows.length; i++)
            {
              console.log("Original Row: " +orig_rows[i]);
              if(orig_rows.rows[i] !== null)
              {
                rows.push(orig_rows.rows[i]);
              }
            }
            console.log(rows);

            for(var i=0;i<rows.length;i++){
                rows[i].death_year = rows[i].death_year || 'present';
                rows[i].url = 'http://cisc-dean.stthomas.edu:8002/name?nconst='+rows[i].nconst;
            }
            $scope.rows = rows;

            //rows = {rows:***ROWS***};
            /*console.log(rows.rows);

            for(var i=0;i<rows.rows.length;i++){
                rows.rows[i].death_year = rows.rows[i].death_year || 'present';
                rows.rows[i].url = 'http://cisc-dean.stthomas.edu:8002/name?nconst='+rows.rows[i].nconst;
            }
            $scope.rows = rows.rows;*/
            console.log($scope.rows);
            //console.log({rows:***ROWS***});
            /*var js_obj = {rows:[1,2,3]};
            var json_string = JSON.stringify(js_obj);
            var json_to_js = JSON.parse(json_string);
            console.log(js_obj);
            console.log(json_string);
            console.log(json_to_js);*/
        });
        var types = "<div class=\"btn-group btn-group-toggle\" data-toggle=\"buttons\">";
        types += "<label class=\"btn btn-primary\">";
        types += "<input type=\"radio\" checked=\"\" autocomplete=\"off\"> movie";
        types += "</label>";
        types += "<label class=\"btn btn-primary\">";
        types += "<input type=\"radio\" autocomplete=\"off\"> tvshow";
        types += "</label>";
        types += "<label class=\"btn btn-primary\">";
        types += "<input type=\"radio\" autocomplete=\"off\"> videogame";
        types += "</label>";
        types += "</div>";
        //var types = "<input type=\"checkbox\" checked=";
        //types += " there";
        $(document).ready(function(){
            $("#edit_btn").click(function(){
                console.log('hey');
                //$("#type").replaceWith("<input type=\"text\" class=\"form-control\" value=\"***TITLE TYPE***\">");
                $("#type").replaceWith(types);
                $("#genre").replaceWith("<input type=\"text\" class=\"form-control\" value=\"***GENRE***\">");
            });
        });


    </script>
  </body>

</html>
